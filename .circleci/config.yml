version: 2.1

orbs:
  docker: circleci/docker@2.1.4

jobs:
  build-push-frontend:
    docker:
      - image: cimg/base:stable
    steps:
      - checkout
      - setup_remote_docker
      - run: |
          ls -a 
          docker build -t lionelritchie29/karsajobs-ui:latest /karsajobs-ui/Dockerfile
      - run: docker tag lionelritchie29/karsajobs-ui:latest ghcr.io/lionelritchie29/karsajobs-ui:latest
      - run: echo $GITHUB_TOKEN | docker login ghcr.io -u lionelritchie29 --password-stdin
      - run: docker push ghcr.io/lionelritchie29/karsajobs-ui:latest

workflows:
  frontend-workflows:
    jobs:
      - docker/hadolint:
          dockerfiles: karsajobs-ui/Dockerfile
      - build-push-frontend
